# 객체지향의 사실과 오해

## 1. 협력하는 객체들의 공동체

> 객체지향이란 실세계를 직접적이고 직관적으로 모델링할 수 있는 패러다임

이 관점에서 보면 객체는 현존하는 사물을 소프트웨어 단으로 추상화시킨 것이라고 생각할 수 있다. 그러나 실제 사물과 객체 간의 개념적 거리는 일반적으로 매우 멀다. 

> 소프트웨어 시스템이 해결하려고 하는 실재는 잘해봐야 먼 친척밖에는 되지 않는다
>
> ​	Bertrand Meyer, 2000

객체지향의 목표는 고객과 사용자가 납득할 수 있는 새로운 세계를 창조하는 것이다. 이렇게 거리가 멂에도 불구하고 현실과 객체 세계를 비교하는 이유는 객체지향의 특성을 이해하기 쉽게 하기 위해서이다.

객체는

- 자신의 상태와 행위를 캡슐화할 수 있다: 자율성
- 메시지를 주고 받으면서 암묵적 약속/명시적 계약을 위해 목표를 달성해간다: 협력

즉 객체는 자율성을 가지면서 주어진 목표를 협력하면서 달성할 수 있는 개념이다.



### 협력을 구성하는 것들에는 무엇이 있을까

협력은 **역할**과 **책임**으로 구성된다.

- 역할: 커피를 주문하는 "손님", 커피를 제조하는 "바리스타"
- 책임: 손님은 "커피를 주문"하는 책임을 수행한다, 바리스타는 "주문된 커피를 제조"하는 책임을 수행한다
- 협력: 손님, 바리스타는 커피 주문이라는 "협력"에 참여한다



### 협력은 어떻게 구성되어 있을까

협력은 기본적으로 **요청(request)**과 **응답(response)**로 구성되어 있다. 하나의 문제를 해결하기 위해 다른 능력을 가진 역할이 필요하고 이 때문에 요청을 한다. 

그리고 이러한 요청이 연쇄적으로 발생하고 이에 대한 응답이 연쇄적으로 전달된다. 즉, 협력은 특정 역할이 요청을 얼마나 성실히 이행하는 가에 달렸다.



### 협력의 중요한 개념들

- 여러 사람이 동일한 역할을 수행할 수 있다: 어떤 사람이든 중요하지 않다. 그 책임만 질 수 있다면 어느 누구나 그 역할을 수행할 수 있다
- 역할은 대체 가능성을 의미한다: 두 명이 동일한 역할을 수행한다면 요청하는 입장에서는 어떤 사람이 그 역할을 수행할 지는 문제가 되지 않는다
- 책임을 수행하는 방법은 자율적으로 선택할 수 있다: 요청을 수행하는 사람들마다 서로 다른 방식으로 응답을 할 수 있다. 이런 능력을 **다형성(polymorphism)**이라 한다.
- 한 사람이 동시에 여러 역할을 수행할 수 있다: 현실에서 우리는 학생이자 알바뛰는 사람 등 여러가지 역할로 수행하는 것과 같이




### 결국 객체지향은

위의 내용에서 사람을 **객체**로 요청을 **메시지**로 수행하는 방법을 **메서드**로 바꾸면 우리가 아는 객체지향 개발방법론이 된다. 즉, 객체지향 설계의 근본은 적절한 객체에게 적절한 책임을 할당하는 것에서 시작된다. **책임이 불분명한 객체는 어플리케이션의 미래 역시 불분명하게 만든다**. 



### 역할은 대체 가능하다

역할은 유연하고 재사용 가능한 협력관계를 구축할 수 있어야 한다. 이는 다형성과도 깊이 연관되어있음.



### 결국은 "객체"지향

이러한 협력관계는 결국 객체들에 의해서 이뤄지고 객체들은 잘게 나눠진 기능들을 책임을 다해 수행, 협력하여 기능 구현에 이바지하게 된다. 결국 협력의 모든 퀄리티를 결정하게 되는 것은 "객체"이다.

이런 객체는 다음 두 가지 기준을 만족해야한다.

- 객체는 충분히 '협력적'이어야 한다
  - 전지전능한 객체는 내부적인 복잡도에 의해 자멸하고 만다
  - 다른 객체의 요청을 듣고 요청을 할 수 있는 객체
  - 객체는 요청에 응답할 뿐, 어떤 방식으로 답할 지, 요청에 응할 지의 여부도 결정
- 객체는 충분히 '자율적'이어야 한다
  - 손님이 캐시어에게 어떤 질문을 해야 하고 어떤 방식으로 주문 내역을 전달하라고 지시하지 않는다



### 메시지

객체는 협력을 위해 다른 객체에게 요청을 전할 수 있어야 하고 응답을 받을 수 있어야 한다. 이를 가능케하는 것이 "메시지"이다. 즉, 협력은 메시지를 전송하는 객체와 메시지를 수신하는 객체 사이의 관계로 구성된다.

메시지는 수신자의 메서드에 의해서 처리되는데, 런타임에서 메서드를 자율적으로 선택할 수 있는 것이 객체지향이 가지고 있는 큰 특징이다. 


### 설계자가 되기 위해서

코드를 담는 클래스의 관점에서 메시지를 주고받는 객체의 관점으로 사고를 전환하라!

어떤 클래스가 필요한가 NO! 어떤 객체들이 어떤 메시지를 주고받으며 협력하는가가 중요하다. 적절한 책임을 수행하는 역할 간의 협력 관계를 구축하라고

